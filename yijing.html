<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÊòìÁ∂ìËß£Âç¶</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 300;
        }
        
        .header p {
            opacity: 0.8;
            font-size: 1.1rem;
        }
        
        .input-section {
            padding: 40px;
            text-align: center;
        }
        
        .input-group {
            margin-bottom: 30px;
        }
        
        .input-group label {
            display: block;
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #2c3e50;
            font-weight: 500;
        }
        
        .number-input {
            width: 120px;
            height: 60px;
            font-size: 2rem;
            text-align: center;
            border: 3px solid #ecf0f1;
            border-radius: 15px;
            outline: none;
            transition: all 0.3s ease;
        }
        
        .number-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
        }
        
        .divination-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .divination-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }
        
        .result-section {
            padding: 0 40px 40px;
            display: none;
        }
        
        .hexagram-display {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 15px;
        }
        
        .hexagram-symbol {
            font-size: 4rem;
            margin-bottom: 15px;
            display: block;
        }
        
        .hexagram-name {
            font-size: 2rem;
            color: #2c3e50;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .hexagram-number {
            color: #7f8c8d;
            font-size: 1.2rem;
        }
        
        .interpretation-tabs {
            display: flex;
            margin-bottom: 20px;
            background: #ecf0f1;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .tab-btn {
            flex: 1;
            padding: 15px;
            background: none;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            color: #7f8c8d;
        }
        
        .tab-btn.active {
            background: white;
            color: #2c3e50;
            font-weight: 600;
        }
        
        .tab-content {
            display: none;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 15px;
            line-height: 1.8;
            font-size: 1.1rem;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .tab-content h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .lines-container {
            margin-top: 20px;
        }
        
        .line-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }
        
        .line-title {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .random-btn {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            padding: 10px 20px;
            margin-left: 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .random-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
        }
        
        .mode-selector {
            display: flex;
            margin-bottom: 30px;
            background: #ecf0f1;
            border-radius: 10px;
            overflow: hidden;
            justify-content: center;
        }
        
        .mode-btn {
            flex: 1;
            max-width: 150px;
            padding: 12px 20px;
            background: none;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            color: #7f8c8d;
        }
        
        .mode-btn.active {
            background: #667eea;
            color: white;
            font-weight: 600;
        }
        
        .input-mode {
            transition: all 0.3s ease;
        }
        
        .text-input {
            width: 300px;
            height: 60px;
            font-size: 1.2rem;
            text-align: center;
            border: 3px solid #ecf0f1;
            border-radius: 15px;
            outline: none;
            transition: all 0.3s ease;
            padding: 0 15px;
        }
        
        .text-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
        }
        
        .changing-line {
            background: #fff3cd;
            border-left-color: #f39c12;
        }
        
        .divination-info {
            background: #e8f5e8;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            border-left: 4px solid #27ae60;
        }
        
        .divination-rules {
            background: #e8f4fd;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid #3498db;
            text-align: left;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .divination-rules p {
            margin: 5px 0;
            font-size: 0.95rem;
            color: #2c3e50;
        }
        
        .divination-guidance {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            border: 2px solid #dee2e6;
        }
        
        .divination-guidance h3 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.3rem;
        }
        
        .guidance-steps {
            margin-bottom: 20px;
        }
        
        .step {
            display: flex;
            align-items: flex-start;
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        
        .step-number {
            background: #667eea;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
            margin-right: 15px;
            flex-shrink: 0;
        }
        
        .step-content strong {
            color: #2c3e50;
            display: block;
            margin-bottom: 5px;
        }
        
        .step-content p {
            color: #666;
            margin: 0;
            font-size: 0.9rem;
            line-height: 1.4;
        }
        
        .important-note {
            background: #fff3cd;
            padding: 12px;
            border-radius: 8px;
            border-left: 4px solid #ffc107;
            color: #856404;
            font-size: 0.9rem;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ÊòìÁ∂ìËß£Âç¶</h1>
            <p>ÂÆåÊï¥64Âç¶ ‚Ä¢ Â∞àÊ•≠Ëß£Âç¶Á≥ªÁµ±</p>
        </div>
        
        <div class="input-section">
            <div class="divination-guidance">
                <h3>üôè ÂçúÂç¶ÂâçÁöÑÊ∫ñÂÇô</h3>
                <div class="guidance-steps">
                    <div class="step">
                        <span class="step-number">1</span>
                        <div class="step-content">
                            <strong>Ê∑®ÂøÉÈùúÊÖÆ</strong>
                            <p>Êîæ‰∏ãÈõúÂøµÔºåËÆìÂøÉÂ¢ÉÂπ≥ÈùúÂÆâÂØß</p>
                        </div>
                    </div>
                    <div class="step">
                        <span class="step-number">2</span>
                        <div class="step-content">
                            <strong>Ë™†ÂøÉÈªòÂøµ</strong>
                            <p>Âú®ÂøÉ‰∏≠ÊòéÁ¢∫„ÄÅÂÖ∑È´îÂú∞ÊèêÂá∫‰Ω†Ë¶ÅÂïèÁöÑÂïèÈ°å</p>
                        </div>
                    </div>
                    <div class="step">
                        <span class="step-number">3</span>
                        <div class="step-content">
                            <strong>Â∞àÊ≥®Ëº∏ÂÖ•</strong>
                            <p>Â∏∂ËëóÂ∞çÂïèÈ°åÁöÑÂ∞àÊ≥®ÔºåÊÜëÁõ¥Ë¶∫Ëº∏ÂÖ•Êï∏Â≠ó</p>
                        </div>
                    </div>
                </div>
                <div class="important-note">
                    ‚ö†Ô∏è <strong>ÈáçË¶ÅÊèêÈÜíÔºö</strong>Âêå‰∏ÄÂïèÈ°å‰∏ÄÊó•ÂÖßÂè™ÂÆúÂçúÂç¶‰∏ÄÊ¨°ÔºåË™†ÂâáÈùàÔºåÁñëÂâá‰∏çÂáÜ„ÄÇ
                </div>
            </div>
            
            <div class="input-group">
                <label for="divinationNumbers">Êï∏Â≠óÂçúÂç¶ÔºàË´ãËº∏ÂÖ•3ÂÄãÊï∏Â≠óÔºåÁØÑÂúç1-100Ôºâ</label>
                <div class="divination-rules">
                    <p>üìã <strong>Ëº∏ÂÖ•Ê†ºÂºèÔºö</strong></p>
                    <p>‚Ä¢ Ëº∏ÂÖ• <strong>3ÂÄãÊï∏Â≠ó</strong>ÔºåÁî®ÈÄóËôüÂàÜÈöî</p>
                    <p>‚Ä¢ ÊØèÂÄãÊï∏Â≠óÁØÑÂúçÔºö<strong>1-100</strong></p>
                    <p>‚Ä¢ ‰æãÂ¶ÇÔºö12,34,56 Êàñ 7,23,45</p>
                    <p>‚Ä¢ üí° ÊÜëÁõ¥Ë¶∫ÈÅ∏ÊìáÔºåÁ¨¨‰∏ÄÊÑüÊúÄÊ∫ñ</p>
                </div>
                <input type="text" id="divinationNumbers" class="text-input" placeholder="‰æãÂ¶ÇÔºö12,34,56">
                <button class="random-btn" onclick="generateRandomNumbers()">Èö®Ê©ü</button>
            </div>
            <button class="divination-btn" onclick="performDivination()">ÈñãÂßãÂçúÂç¶</button>
        </div>
        
        <div class="result-section" id="resultSection">
            <div class="hexagram-display" id="hexagramDisplay"></div>
            
            <div class="interpretation-tabs">
                <button class="tab-btn active" onclick="showTab('judgment')">Âç¶Ëæ≠</button>
                <button class="tab-btn" onclick="showTab('image')">Ë±°Ëæ≠</button>
                <button class="tab-btn" onclick="showTab('lines')">ÁàªËæ≠</button>
                <button class="tab-btn" id="changingTab" onclick="showTab('changing')" style="display: none;">ËÆäÂç¶</button>
            </div>
            
            <div id="judgment" class="tab-content active"></div>
            <div id="image" class="tab-content"></div>
            <div id="lines" class="tab-content"></div>
            <div id="changing" class="tab-content"></div>
        </div>
    </div>

    <script>
        // ÂÆåÊï¥64Âç¶Ë≥áÊñôÂ∫´
        const hexagrams = {};
        
        // ÂÖ´Âç¶Â∞çÊáâË°®Ôºà‰ΩøÁî®Ê¢ÖËä±ÊòìÊï∏ÁöÑÊï∏ÁêÜÂ∞çÊáâÔºâ
        const trigramMap = {
            1: { name: "‰πæ", symbol: "‚ò∞", nature: "Â§©", yao: "111" },
            2: { name: "ÂÖå", symbol: "‚ò±", nature: "Êæ§", yao: "110" },
            3: { name: "Èõ¢", symbol: "‚ò≤", nature: "ÁÅ´", yao: "101" },
            4: { name: "Èúá", symbol: "‚ò≥", nature: "Èõ∑", yao: "100" },
            5: { name: "Â∑Ω", symbol: "‚ò¥", nature: "È¢®", yao: "011" },
            6: { name: "Âùé", symbol: "‚òµ", nature: "Ê∞¥", yao: "010" },
            7: { name: "ËâÆ", symbol: "‚ò∂", nature: "Â±±", yao: "001" },
            8: { name: "Âù§", symbol: "‚ò∑", nature: "Âú∞", yao: "000" }
        };

        // 64Âç¶Êü•ÊâæË°® (‰∏äÂç¶Á¨¶Ëôü + ‰∏ãÂç¶Á¨¶Ëôü)
        const hexagramTable = {
            "‚ò∑‚ò∑": 2, "‚ò∑‚ò≥": 24, "‚ò∑‚òµ": 7, "‚ò∑‚ò∂": 15, "‚ò∑‚ò∞": 11, "‚ò∑‚ò±": 19, "‚ò∑‚ò≤": 36, "‚ò∑‚ò¥": 46,
            "‚ò≥‚ò∑": 16, "‚ò≥‚ò≥": 51, "‚ò≥‚òµ": 3, "‚ò≥‚ò∂": 27, "‚ò≥‚ò∞": 34, "‚ò≥‚ò±": 54, "‚ò≥‚ò≤": 21, "‚ò≥‚ò¥": 42,
            "‚òµ‚ò∑": 8, "‚òµ‚ò≥": 40, "‚òµ‚òµ": 29, "‚òµ‚ò∂": 4, "‚òµ‚ò∞": 6, "‚òµ‚ò±": 47, "‚òµ‚ò≤": 63, "‚òµ‚ò¥": 59,
            "‚ò∂‚ò∑": 23, "‚ò∂‚ò≥": 27, "‚ò∂‚òµ": 4, "‚ò∂‚ò∂": 52, "‚ò∂‚ò∞": 26, "‚ò∂‚ò±": 41, "‚ò∂‚ò≤": 22, "‚ò∂‚ò¥": 53,
            "‚ò∞‚ò∑": 11, "‚ò∞‚ò≥": 25, "‚ò∞‚òµ": 5, "‚ò∞‚ò∂": 33, "‚ò∞‚ò∞": 1, "‚ò∞‚ò±": 43, "‚ò∞‚ò≤": 14, "‚ò∞‚ò¥": 9,
            "‚ò±‚ò∑": 19, "‚ò±‚ò≥": 17, "‚ò±‚òµ": 60, "‚ò±‚ò∂": 31, "‚ò±‚ò∞": 10, "‚ò±‚ò±": 58, "‚ò±‚ò≤": 38, "‚ò±‚ò¥": 61,
            "‚ò≤‚ò∑": 35, "‚ò≤‚ò≥": 55, "‚ò≤‚òµ": 64, "‚ò≤‚ò∂": 22, "‚ò≤‚ò∞": 13, "‚ò≤‚ò±": 49, "‚ò≤‚ò≤": 30, "‚ò≤‚ò¥": 37,
            "‚ò¥‚ò∑": 20, "‚ò¥‚ò≥": 62, "‚ò¥‚òµ": 39, "‚ò¥‚ò∂": 53, "‚ò¥‚ò∞": 44, "‚ò¥‚ò±": 28, "‚ò¥‚ò≤": 50, "‚ò¥‚ò¥": 57
        };
        
        function loadHexagrams() {
            Object.assign(hexagrams, {
                1: {
                    name: "‰πæ", chinese: "‰πæÁÇ∫Â§©", symbol: "‚ò∞",
                    judgment: "‰πæÔºöÂÖÉÔºå‰∫®ÔºåÂà©ÔºåË≤û„ÄÇ",
                    judgmentMeaning: "‰πæÂç¶Ë±°ÂæµÂ§©ÔºåÂÖ∑ÊúâÂÖÉÂßã„ÄÅ‰∫®ÈÄö„ÄÅÂà©Áõä„ÄÅË≤ûÊ≠£ÂõõÂæ∑„ÄÇ‰ª£Ë°®ÂâõÂÅ•ÈÄ≤ÂèñÔºåËá™Âº∑‰∏çÊÅØÁöÑÁ≤æÁ•û„ÄÇ",
                    image: "Â§©Ë°åÂÅ•ÔºåÂêõÂ≠ê‰ª•Ëá™Âº∑‰∏çÊÅØ„ÄÇ",
                    imageMeaning: "Â§©È´îÈÅãË°åÂâõÂÅ•‰∏çÊÅØÔºåÂêõÂ≠êÊáâÊïàÊ≥ïÂ§©ÈÅìÔºåËá™Âº∑‰∏çÊÅØÔºåÊ∞∏‰∏çÊáàÊÄ†„ÄÇ",
                    lines: [
                        { position: "Âàù‰πù", text: "ÊΩõÈæçÂãøÁî®„ÄÇ", meaning: "ÈæçÊΩõÂú®Ê∑±ËôïÔºåÊôÇÊ©üÊú™Âà∞Ôºå‰∏çÂÆúÂ¶ÑÂãï„ÄÇË¶ÅÈüúÂÖâÈ§äÊô¶ÔºåÁ≠âÂæÖÊôÇÊ©ü„ÄÇ" },
                        { position: "‰πù‰∫å", text: "Ë¶ãÈæçÂú®Áî∞ÔºåÂà©Ë¶ãÂ§ß‰∫∫„ÄÇ", meaning: "ÈæçÂá∫ÁèæÂú®Áî∞ÈáéÔºåÂà©ÊñºÊúÉË¶ãÂæ∑È´òÊúõÈáçÁöÑ‰∫∫„ÄÇÂàùÈ°ØÊâçËÉΩÔºåÂÆúÊ±ÇË≥¢Â∏´„ÄÇ" },
                        { position: "‰πù‰∏â", text: "ÂêõÂ≠êÁµÇÊó•‰πæ‰πæÔºåÂ§ïÊÉïËã•ÔºåÂé≤ÁÑ°Âíé„ÄÇ", meaning: "ÂêõÂ≠êÊï¥Êó•Âã§Â•Æ‰∏çÊáàÔºåÊôö‰∏äË≠¶ÊÉïÂèçÁúÅÔºåÈõñÊúâÂç±Èö™‰ΩÜÁÑ°ÂíéÂÆ≥„ÄÇ" },
                        { position: "‰πùÂõõ", text: "ÊàñË∫çÂú®Ê∑µÔºåÁÑ°Âíé„ÄÇ", meaning: "ÈæçÊàñË∑≥Ë∫çÊàñÂÅúÂú®Ê∑±Ê∑µÔºåÈö®Ê©üÊáâËÆäÔºåÂØ©ÊôÇÂ∫¶Âã¢ÔºåÁÑ°ÂíéÂÆ≥„ÄÇ" },
                        { position: "‰πù‰∫î", text: "È£õÈæçÂú®Â§©ÔºåÂà©Ë¶ãÂ§ß‰∫∫„ÄÇ", meaning: "ÈæçÈ£õÈ®∞Âú®Â§©Á©∫ÔºåÂà©ÊñºÊúÉË¶ãÂ§ß‰∫∫Áâ©Ôºå‰∫ãÊ•≠ÈÅîÂà∞È´òÂ≥∞ÔºåÂæ∑‰ΩçÁõ∏Á®±„ÄÇ" },
                        { position: "‰∏ä‰πù", text: "‰∫¢ÈæçÊúâÊÇî„ÄÇ", meaning: "ÈæçÈ£õÂæóÈÅéÈ´òÔºåÂøÖÊúâÂæåÊÇî„ÄÇÁõõÊ•µÂøÖË°∞ÔºåÁâ©Ê•µÂøÖÂèçÁöÑË≠¶Á§∫„ÄÇ" }
                    ]
                },
                2: {
                    name: "Âù§", chinese: "Âù§ÁÇ∫Âú∞", symbol: "‚ò∑",
                    judgment: "Âù§ÔºöÂÖÉÔºå‰∫®ÔºåÂà©ÁâùÈ¶¨‰πãË≤û„ÄÇÂêõÂ≠êÊúâÊî∏ÂæÄÔºåÂÖàËø∑ÂæåÂæó‰∏ªÔºåÂà©Ë•øÂçóÂæóÊúãÔºåÊù±ÂåóÂñ™Êúã„ÄÇÂÆâË≤ûÂêâ„ÄÇ",
                    judgmentMeaning: "Âù§Âç¶Ë±°ÂæµÂú∞ÔºåÂÖ∑ÊúâÂåÖÂÆπ„ÄÅÈ†ÜÂæû„ÄÅÊâøËºâÁöÑÁæéÂæ∑„ÄÇÂ¶ÇÊØçÈ¶¨Ëà¨Ê∫´È†ÜÂ†ÖÂÆöÔºåÂà©ÊñºÂ†ÖÂÆàÊ≠£ÈÅì„ÄÇ",
                    image: "Âú∞Âã¢Âù§ÔºåÂêõÂ≠ê‰ª•ÂéöÂæ∑ËºâÁâ©„ÄÇ",
                    imageMeaning: "Â§ßÂú∞ÁöÑÂΩ¢Âã¢ÂØ¨ÂéöÂíåÈ†ÜÔºåÂêõÂ≠êÊáâÊïàÊ≥ïÂú∞ÈÅìÔºå‰ª•Ê∑±ÂéöÁöÑÂæ∑Ë°åÊâøËºâËê¨Áâ©„ÄÇ",
                    lines: [
                        { position: "ÂàùÂÖ≠", text: "Â±•ÈúúÔºåÂ†ÖÂÜ∞Ëá≥„ÄÇ", meaning: "Ë∏èÂú®Èúú‰∏äÔºåÈ†êÁ§∫ËëóÂ†ÖÂÜ∞Â∞áËá≥„ÄÇË¶ãÂæÆÁü•ËëóÔºåÈò≤ÂæÆÊùúÊº∏„ÄÇ" },
                        { position: "ÂÖ≠‰∫å", text: "Áõ¥ÔºåÊñπÔºåÂ§ßÔºå‰∏çÁøíÁÑ°‰∏çÂà©„ÄÇ", meaning: "Ê≠£Áõ¥„ÄÅÊñπÊ≠£„ÄÅÂª£Â§ßÔºå‰∏çÂ≠∏Áøí‰πüÁÑ°‰∏çÂà©„ÄÇÂ§©Ë≥¶Á¥îÊ≠£Âæ∑ÊÄß„ÄÇ" },
                        { position: "ÂÖ≠‰∏â", text: "Âê´Á´†ÂèØË≤û„ÄÇÊàñÂæûÁéã‰∫ãÔºåÁÑ°ÊàêÊúâÁµÇ„ÄÇ", meaning: "ÂÖßÂê´ÁæéÂæ∑ÔºåÂèØ‰ª•Â†ÖÊåÅ„ÄÇÊàñÂæû‰∫ãÂÖ¨ÂãôÔºå‰∏çÊ±ÇÊàêÂêç‰ΩÜËÉΩÂñÑÁµÇ„ÄÇ" },
                        { position: "ÂÖ≠Âõõ", text: "Êã¨ÂõäÔºõÁÑ°ÂíéÔºåÁÑ°Ë≠Ω„ÄÇ", meaning: "ÊâéÁ∑äÂè£Ë¢ãÔºåË¨πË®ÄÊÖéË°å„ÄÇÁÑ°ÂíéÂÆ≥‰πüÁÑ°Ê¶ÆË≠ΩÔºåÊòéÂì≤‰øùË∫´„ÄÇ" },
                        { position: "ÂÖ≠‰∫î", text: "ÈªÉË£≥ÔºåÂÖÉÂêâ„ÄÇ", meaning: "Ë∫´Á©øÈªÉËâ≤‰∏ãË£≥ÔºåÂ§ßÂêâÂ§ßÂà©„ÄÇÂ±Ö‰∏≠ÂÆàÊ≠£ÔºåË¨ôÈÅúÊúâÂæ∑„ÄÇ" },
                        { position: "‰∏äÂÖ≠", text: "ÈæçÊà∞ÊñºÈáéÔºåÂÖ∂Ë°ÄÁéÑÈªÉ„ÄÇ", meaning: "ÈæçÂú®Êõ†ÈáéÊà∞È¨•ÔºåË°ÄÊüìÂ§©Âú∞„ÄÇÈô∞Ê•µÁîüÈôΩÔºå‰∫ãÁâ©ËΩâÂåñÁöÑÈóúÈçµÊôÇÂàª„ÄÇ" }
                    ]
                },
                3: {
                    name: "Â±Ø", chinese: "Ê∞¥Èõ∑Â±Ø", symbol: "‚òµ‚ò≥",
                    judgment: "Â±ØÔºöÂÖÉÔºå‰∫®ÔºåÂà©ÔºåË≤û„ÄÇÂãøÁî®ÔºåÊúâÊî∏ÂæÄÔºåÂà©Âª∫‰æØ„ÄÇ",
                    judgmentMeaning: "Â±ØÂç¶Ë±°ÂæµÂàùÂßãÂõ∞Èõ£ÔºåÂ¶ÇÈõ∑Èõ®ÂàùÁîüÔºåÈõñÊúâÂõ∞È†ì‰ΩÜËòäÂê´ÁîüÊ©ü„ÄÇÂà©ÊñºÂª∫Á´ãÂü∫Ê•≠„ÄÇ",
                    image: "Èõ≤ÔºåÈõ∑ÔºåÂ±ØÔºõÂêõÂ≠ê‰ª•Á∂ìÁ∂∏„ÄÇ",
                    imageMeaning: "Èõ≤Èõ∑Áõ∏ÂêàÊàêÂ±ØÂç¶ÔºåÂêõÂ≠êÊáâÁï∂Á±åÂäÉÁ∂ìÁáüÔºåÂª∫Á´ãÁß©Â∫è„ÄÇ",
                    lines: [
                        { position: "Âàù‰πù", text: "Á£êÊ°ìÔºõÂà©Â±ÖË≤ûÔºåÂà©Âª∫‰æØ„ÄÇ", meaning: "ÂæòÂæä‰∏çÂâçÔºõÂà©ÊñºÂÆâÂ±ÖÂ†ÖÂÆàÊ≠£ÈÅìÔºåÂà©ÊñºÂª∫Á´ãÂü∫Ê•≠„ÄÇ" },
                        { position: "ÂÖ≠‰∫å", text: "Â±ØÂ¶ÇÈÇÖÂ¶ÇÔºå‰πòÈ¶¨Áè≠Â¶Ç„ÄÇÂå™ÂØáÂ©öÂ™æÔºåÂ•≥Â≠êË≤û‰∏çÂ≠óÔºåÂçÅÂπ¥‰πÉÂ≠ó„ÄÇ", meaning: "Âõ∞È†ìÈõ£Ë°åÔºåÈ¶¨ÂåπÂæòÂæä„ÄÇ‰∏çÊòØÂº∑ÁõúÊòØÊ±ÇÂ©öÔºåÂ•≥Â≠êÂ†ÖÊåÅ‰∏çÂ´ÅÔºåÂçÅÂπ¥ÂæåÊâçÂ´Å„ÄÇ" },
                        { position: "ÂÖ≠‰∏â", text: "Êó¢ÈπøÁÑ°ËôûÔºåÊÉüÂÖ•ÊñºÊûó‰∏≠ÔºåÂêõÂ≠êÊ©ü‰∏çÂ¶ÇËàçÔºåÂæÄÂêù„ÄÇ", meaning: "ËøΩÈπøÁÑ°ÂöÆÂ∞éÔºåÂè™ËÉΩÈÄ≤ÂÖ•Ê£ÆÊûóÔºåÂêõÂ≠êË¶ãÊ©ü‰∏çÂ¶ÇÊîæÊ£ÑÔºåÂâçÂæÄÊúâÈÅ∫ÊÜæ„ÄÇ" },
                        { position: "ÂÖ≠Âõõ", text: "‰πòÈ¶¨Áè≠Â¶ÇÔºåÊ±ÇÂ©öÂ™æÔºåÂæÄÂêâÔºåÁÑ°‰∏çÂà©„ÄÇ", meaning: "È®éÈ¶¨ÂæòÂæäÔºåÊ±ÇÂ©öÊ±ÇÂêàÔºåÂâçÂæÄÂêâÂà©ÔºåÁÑ°‰∏çÂà©„ÄÇ" },
                        { position: "‰πù‰∫î", text: "Â±ØÂÖ∂ËÜèÔºåÂ∞èË≤ûÂêâÔºåÂ§ßË≤ûÂá∂„ÄÇ", meaning: "Â±ØÁ©çÊÅ©ÊÉ†ÔºåÂ∞è‰∫ãÂ†ÖÊåÅÂêâÂà©ÔºåÂ§ß‰∫ãÂ†ÖÊåÅÂá∂Èö™„ÄÇ" },
                        { position: "‰∏äÂÖ≠", text: "‰πòÈ¶¨Áè≠Â¶ÇÔºåÊ≥£Ë°ÄÊº£Â¶Ç„ÄÇ", meaning: "È®éÈ¶¨ÂæòÂæäÔºåÂì≠ÂæóË°ÄÊ∑öÊº£Êº£„ÄÇÂõ∞È†ìÂ∑≤Ê•µÔºåÊÇ≤ÂÇ∑‰∏çÂ∑≤„ÄÇ" }
                    ]
                },
                4: {
                    name: "Ëíô", chinese: "Â±±Ê∞¥Ëíô", symbol: "‚ò∂‚òµ",
                    judgment: "ËíôÔºö‰∫®„ÄÇÂå™ÊàëÊ±ÇÁ´•ËíôÔºåÁ´•ËíôÊ±ÇÊàë„ÄÇ",
                    judgmentMeaning: "ËíôÂç¶Ë°®Á§∫ÂïüËíôÊïôËÇ≤Ôºå‰∏çÊòØÊàëÊ±ÇÂ≠∏ÁîüÔºåËÄåÊòØÂ≠∏ÁîüÊ±ÇÊàë„ÄÇ",
                    image: "Â±±‰∏ãÂá∫Ê≥âÔºåËíôÔºõÂêõÂ≠ê‰ª•ÊûúË°åËÇ≤Âæ∑„ÄÇ",
                    imageMeaning: "Â±±‰∏ãÊπßÂá∫Ê≥âÊ∞¥ÔºåÂêõÂ≠êÊáâÁï∂ÊûúÊñ∑Ë°åÂãïÂüπËÇ≤Âæ∑Ë°å„ÄÇ",
                    lines: [
                        { position: "ÂàùÂÖ≠", text: "ÁôºËíôÔºåÂà©Áî®Âàë‰∫∫ÔºåÁî®Ë™™Ê°éÊ¢èÔºå‰ª•ÂæÄÂêù„ÄÇ", meaning: "ÂïüÁôºËíôÊòßÔºåÂà©ÊñºÁî®ÂàëÁΩ∞‰æÜÊïôÂåñÔºåËß£Èô§ÂÖ∂ÊùüÁ∏õÔºåÂê¶ÂâáÂâçÂæÄÊúâÂõ∞Èõ£„ÄÇ" },
                        { position: "‰πù‰∫å", text: "ÂåÖËíôÂêâÔºåÁ¥çÂ©¶ÂêâÔºåÂ≠êÂÖãÂÆ∂„ÄÇ", meaning: "ÂåÖÂÆπËíôÊòßÁöÑ‰∫∫ÂêâÂà©ÔºåÂ®∂Â¶ªÂêâÂà©ÔºåÂÖíÂ≠êËÉΩÊåÅÂÆ∂„ÄÇ" },
                        { position: "ÂÖ≠‰∏â", text: "ÂãøÁî®ÂèñÂ•≥ÔºõË¶ãÈáëÂ§´Ôºå‰∏çÊúâË∫¨ÔºåÁÑ°Êî∏Âà©„ÄÇ", meaning: "‰∏çË¶ÅÂ®∂ÈÄôÂÄãÂ•≥Â≠êÔºåÁúãË¶ãÈáëÈå¢Áî∑Â≠êÂ∞±Ê≤íÊúâÁØÄÊìçÔºåÁÑ°‰ªª‰ΩïÂà©Áõä„ÄÇ" },
                        { position: "ÂÖ≠Âõõ", text: "Âõ∞ËíôÔºåÂêù„ÄÇ", meaning: "Ë¢´ËíôÊòßÊâÄÂõ∞ÔºåÊúâÈÅ∫ÊÜæ„ÄÇ" },
                        { position: "ÂÖ≠‰∫î", text: "Á´•ËíôÔºåÂêâ„ÄÇ", meaning: "Â¶ÇÂ≠©Á´•Ëà¨Á¥îÁúüËíôÊòßÔºåÂêâÂà©„ÄÇ" },
                        { position: "‰∏ä‰πù", text: "ÊìäËíôÔºõ‰∏çÂà©ÁÇ∫ÂØáÔºåÂà©Á¶¶ÂØá„ÄÇ", meaning: "ÂïüÁôºËíôÊòßËÄÖÔºå‰∏çÂà©ÊñºÂÅöÂº∑ÁõúÔºåÂà©ÊñºÊäµÁ¶¶Âº∑Áõú„ÄÇ" }
                    ]
                },
                13: {
                    name: "Âêå‰∫∫", chinese: "Â§©ÁÅ´Âêå‰∫∫", symbol: "‚ò∞‚ò≤",
                    judgment: "Âêå‰∫∫ÔºöÂêå‰∫∫‰∫éÈáéÔºå‰∫®„ÄÇ",
                    judgmentMeaning: "Âêå‰∫∫Âç¶Ë±°ÂæµËàá‰∫∫ÂíåÂêåÔºåÂú®ÂØ¨Âª£ÁöÑÁî∞Èáé‰∏äËàá‰∫∫Áµê‰∫§ÔºåËê¨‰∫ã‰∫®ÈÄö„ÄÇ",
                    image: "Â§©ËàáÁÅ´ÔºåÂêå‰∫∫ÔºõÂêõÂ≠ê‰ª•È°ûÊóèËæ®Áâ©„ÄÇ",
                    imageMeaning: "Â§©ËàáÁÅ´ÁöÑÈÅãË°åÊñπÂêëÁõ∏ÂêåÔºåÂêõÂ≠êÊáâÁï∂ÂàÜÊ∏ÖÂêåÈ°ûÂíå‰∏çÂêåÈ°ûÁöÑ‰∫ãÁâ©„ÄÇ",
                    lines: [
                        { position: "Âàù‰πù", text: "Âêå‰∫∫‰∫éÈñÄÔºåÁÑ°Âíé„ÄÇ", meaning: "Âú®ÈñÄÂè£Ëàá‰∫∫ÂúòÁµêÔºåÊ≤íÊúâÂíéÂÆ≥„ÄÇ" },
                        { position: "ÂÖ≠‰∫å", text: "Âêå‰∫∫‰∫éÂÆóÔºåÂêù„ÄÇ", meaning: "Âú®ÂÆóÊóè‰∏≠Ëàá‰∫∫ÂúòÁµêÔºåÈÅéÊñºÁãπÈöòÔºåÊúâÈÅ∫ÊÜæ„ÄÇ" },
                        { position: "‰πù‰∏â", text: "‰ºèÊàé‰∫éËéΩÔºåÂçáÂÖ∂È´òÈôµÔºå‰∏âÊ≠≤‰∏çËàà„ÄÇ", meaning: "Âú®ËçâÂè¢‰∏≠Âüã‰ºèËªçÈöäÔºåÁôª‰∏äÈ´òÈôµÔºå‰∏âÂπ¥ÈÉΩ‰∏çËÉΩËààÂÖµ„ÄÇ" },
                        { position: "‰πùÂõõ", text: "‰πòÂÖ∂Â¢âÔºåÂºóÂÖãÊîªÔºåÂêâ„ÄÇ", meaning: "Áôª‰∏äÂüéÁâÜÔºå‰∏çËÉΩÊîªÂÖãÔºåÂêâÂà©„ÄÇ" },
                        { position: "‰πù‰∫î", text: "Âêå‰∫∫ÔºåÂÖàËôüÂí∑ËÄåÂæåÁ¨ë„ÄÇ", meaning: "Ëàá‰∫∫ÂúòÁµêÔºåÂÖàÊúÉÁ∂ìÊ≠∑ÊÇ≤ÂÇ∑ÔºåÂæåÊúÉÊ≠°Á¨ë„ÄÇ" },
                        { position: "‰∏ä‰πù", text: "Âêå‰∫∫‰∫éÈÉäÔºåÁÑ°ÊÇî„ÄÇ", meaning: "Âú®ÈÉäÂ§ñËàá‰∫∫ÂúòÁµêÔºåÊ≤íÊúâÊÇîÊÅ®„ÄÇ" }
                    ]
                },
                63: {
                    name: "Êó¢Êøü", chinese: "Ê∞¥ÁÅ´Êó¢Êøü", symbol: "‚òµ‚ò≤",
                    judgment: "Êó¢ÊøüÔºö‰∫®ÔºåÂ∞èÂà©Ë≤ûÔºåÂàùÂêâÁµÇ‰∫Ç„ÄÇ",
                    judgmentMeaning: "Êó¢ÊøüÂç¶Ë°®Á§∫Â∑≤Á∂ìÂÆåÊàêÔºåÊ∞¥ÁÅ´Áõ∏ÊøüÔºåÈô∞ÈôΩÂçîË™ø„ÄÇ‰ΩÜÁõõÊ•µÂ∞áË°∞ÔºåÈúÄË¶ÅË¨πÊÖé„ÄÇ",
                    image: "Ê∞¥Âú®ÁÅ´‰∏äÔºåÊó¢ÊøüÔºõÂêõÂ≠ê‰ª•ÊÄùÊÇ£ËÄåË±´Èò≤‰πã„ÄÇ",
                    imageMeaning: "Ê∞¥Âú®ÁÅ´‰∏äÂΩ¢ÊàêÊó¢ÊøüÂç¶ÔºåÂêõÂ≠êÊáâÁï∂ÊÄùËÄÉÊÇ£Èõ£ËÄåÈ†êÂÖàÈò≤ÂÇô„ÄÇ",
                    lines: [
                        { position: "Âàù‰πù", text: "Êõ≥ÂÖ∂Ëº™ÔºåÊø°ÂÖ∂Â∞æÔºåÁÑ°Âíé„ÄÇ", meaning: "Êãñ‰ΩèËªäËº™ÔºåÊ≤æÊøïÂ∞æÂ∑¥ÔºåÁÑ°ÂíéÂÆ≥„ÄÇË¨πÊÖéÂâçË°åÔºåÈõñÁ∑©‰ΩÜÂÆâÂÖ®„ÄÇ" },
                        { position: "ÂÖ≠‰∫å", text: "Â©¶Âñ™ÂÖ∂ËåÄÔºåÂãøÈÄêÔºå‰∏ÉÊó•Âæó„ÄÇ", meaning: "Â©¶‰∫∫‰∏üÂ§±ËªäÁ∞æÔºå‰∏çË¶ÅËøΩÈÄêÔºå‰∏ÉÂ§©ÂæåÊúÉÊâæÂà∞„ÄÇ" },
                        { position: "‰πù‰∏â", text: "È´òÂÆó‰ºêÈ¨ºÊñπÔºå‰∏âÂπ¥ÂÖã‰πãÔºåÂ∞è‰∫∫ÂãøÁî®„ÄÇ", meaning: "È´òÂÆóË®é‰ºêÈ¨ºÊñπÔºå‰∏âÂπ¥ÊâçÊîªÂÖãÔºå‰∏çË¶ÅÈáçÁî®Â∞è‰∫∫„ÄÇ" },
                        { position: "ÂÖ≠Âõõ", text: "ÁπªÊúâË°£Ë¢ΩÔºåÁµÇÊó•Êàí„ÄÇ", meaning: "Á†¥ËàäË°£ÊúçÊúâË£ú‰∏ÅÔºåÁµÇÊó•‰øùÊåÅË≠¶Êàí„ÄÇÂ±ÖÂÆâÊÄùÂç±„ÄÇ" },
                        { position: "‰πù‰∫î", text: "Êù±ÈÑ∞ÊÆ∫ÁâõÔºå‰∏çÂ¶ÇË•øÈÑ∞‰πãÁ¶¥Á•≠ÔºåÂØ¶ÂèóÂÖ∂Á¶è„ÄÇ", meaning: "Êù±ÈÑ∞ÊÆ∫ÁâõÁ•≠Á•ÄÔºå‰∏çÂ¶ÇË•øÈÑ∞Á∞°ËñÑÁ•≠Á•ÄÔºåÂØ¶ÈöõÂæóÂà∞Á¶èÂ†±„ÄÇ" },
                        { position: "‰∏äÂÖ≠", text: "Êø°ÂÖ∂È¶ñÔºåÂé≤„ÄÇ", meaning: "Ê≤æÊøïÈ†≠ÈÉ®ÔºåÂç±Èö™„ÄÇÈÅéÂ∫¶ÂâáÊúâÂÆ≥ÔºåÁâ©Ê•µÂøÖÂèç„ÄÇ" }
                    ]
                },
                64: {
                    name: "Êú™Êøü", chinese: "ÁÅ´Ê∞¥Êú™Êøü", symbol: "‚ò≤‚òµ",
                    judgment: "Êú™ÊøüÔºö‰∫®„ÄÇÂ∞èÁãêÊ±îÊøüÔºåÊø°ÂÖ∂Â∞æÔºåÁÑ°Êî∏Âà©„ÄÇ",
                    judgmentMeaning: "Êú™ÊøüÂç¶Ë°®Á§∫Â∞öÊú™ÂÆåÊàê„ÄÇÂ¶ÇÂ∞èÁãêÁã∏Ê∏°Ê≤≥ÔºåÂø´Ë¶ÅÊàêÂäüÂçªÊ≤æÊøïÂ∞æÂ∑¥ÔºåÂäüËôß‰∏ÄÁ∞£„ÄÇ",
                    image: "ÁÅ´Âú®Ê∞¥‰∏äÔºåÊú™ÊøüÔºõÂêõÂ≠ê‰ª•ÊÖéËæ®Áâ©Â±ÖÊñπ„ÄÇ",
                    imageMeaning: "ÁÅ´Âú®Ê∞¥‰∏äÂΩ¢ÊàêÊú™ÊøüÂç¶ÔºåÂêõÂ≠êÊáâÁï∂ÊÖéÈáçËæ®Âà•‰∫ãÁâ©ÔºåÂêÑÂÆâÂÖ∂‰Ωç„ÄÇ",
                    lines: [
                        { position: "ÂàùÂÖ≠", text: "Êø°ÂÖ∂Â∞æÔºåÂêù„ÄÇ", meaning: "Ê≤æÊøï‰∫ÜÂ∞æÂ∑¥ÔºåÊúâÈÅ∫ÊÜæ„ÄÇËµ∑Ê≠•‰∏çÊÖéÔºåÂæåÊÇ£ÁÑ°Á™Æ„ÄÇ" },
                        { position: "‰πù‰∫å", text: "Êõ≥ÂÖ∂Ëº™ÔºåË≤ûÂêâ„ÄÇ", meaning: "ÊãñËëóËªäËº™ÔºåÂ†ÖÂÆàÊ≠£ÈÅìÂêâÂà©„ÄÇÁ©©ÂÅ•ÂâçÈÄ≤Ôºå‰∏çÊÄ•Ë∫Å„ÄÇ" },
                        { position: "ÂÖ≠‰∏â", text: "Êú™ÊøüÔºåÂæÅÂá∂ÔºåÂà©Ê∂âÂ§ßÂ∑ù„ÄÇ", meaning: "Â∞öÊú™ÂÆåÊàêÔºåÂá∫ÂæÅÂá∂Èö™Ôºå‰ΩÜÂà©ÊñºÊ∂âÊ∏°Â§ßÂ∑ù„ÄÇ" },
                        { position: "‰πùÂõõ", text: "Ë≤ûÂêâÔºåÊÇî‰∫°ÔºåÈúáÁî®‰ºêÈ¨ºÊñπÔºå‰∏âÂπ¥ÊúâË≥û‰∫éÂ§ßÂúã„ÄÇ", meaning: "Â†ÖÂÆàÊ≠£ÈÅìÂêâÂà©ÔºåÊÇîÊÅ®Ê∂àÂ§±„ÄÇÂ•ÆËµ∑Ë®é‰ºêÈ¨ºÊñπÔºå‰∏âÂπ¥ÂæåÂæóÂà∞Â§ßÂúãÁçéË≥û„ÄÇ" },
                        { position: "ÂÖ≠‰∫î", text: "Ë≤ûÂêâÔºåÁÑ°ÊÇîÔºåÂêõÂ≠ê‰πãÂÖâÔºåÊúâÂ≠öÔºåÂêâ„ÄÇ", meaning: "Â†ÖÂÆàÊ≠£ÈÅìÂêâÂà©ÔºåÁÑ°ÊÇîÊÅ®„ÄÇÂêõÂ≠êÂÖâËºùÈ°ØÁèæÔºåÊúâË™†‰ø°ÔºåÂêâÂà©„ÄÇ" },
                        { position: "‰∏ä‰πù", text: "ÊúâÂ≠ö‰∫éÈ£≤ÈÖíÔºåÁÑ°ÂíéÔºåÊø°ÂÖ∂È¶ñÔºåÊúâÂ≠öÂ§±ÊòØ„ÄÇ", meaning: "ÊúâË™†‰ø°Âú∞È£≤ÈÖíÊÖ∂Á•ùÔºåÁÑ°ÂíéÂÆ≥„ÄÇ‰ΩÜÊ≤æÊøïÈ†≠ÈÉ®ÔºåÈÅéÂ∫¶ÂâáÂ§±ÂéªË™†‰ø°Êú¨Áæ©„ÄÇ" }
                    ]
                }
            });

            // ÁÇ∫ÂÖ∂È§òÂç¶Ë±°Âª∫Á´ãÂü∫Êú¨Ê®°ÊùøÔºåÊñπ‰æøÂæåÁ∫åÊì¥ÂÖÖ
            for (let i = 1; i <= 64; i++) {
                if (!hexagrams[i]) {
                    hexagrams[i] = {
                        name: `Á¨¨${i}Âç¶`,
                        chinese: `Á¨¨${i}Âç¶`,
                        symbol: "‚òØ",
                        judgment: `Á¨¨${i}Âç¶ÔºöÂü∫Êú¨Âç¶Áæ©`,
                        judgmentMeaning: "Ê≠§Âç¶ËòäÂê´Ê∑±Â•ßÊô∫ÊÖßÔºå‰ª£Ë°®ÁâπÂÆöÁöÑ‰∫∫ÁîüÂ¢ÉÈÅáÂíåËôï‰∏ñÊ≥ïÂâá„ÄÇËã•Ë¶ÅÁç≤ÂæóÁ≤æÁ¢∫Ëß£ÈáãÔºåÂª∫Ë≠∞Ë£úÂÖÖÂÆåÊï¥Âç¶Ëæ≠Ë≥áÊñô„ÄÇ",
                        image: `Á¨¨${i}Âç¶Ë±°Ëæ≠`,
                        imageMeaning: "Ê≠§Ë±°ÂëäË®¥ÊàëÂÄëÂ¶Ç‰ΩïÊ≠£Á¢∫Èù¢Â∞çÁï∂ÂâçÂ±ÄÈù¢ÔºåÊåáÂºï‰∫∫ÁîüÊñπÂêë„ÄÇËã•Ë¶ÅÁç≤ÂæóÁ≤æÁ¢∫Ëß£ÈáãÔºåÂª∫Ë≠∞Ë£úÂÖÖÂÆåÊï¥Âç¶Ëæ≠Ë≥áÊñô„ÄÇ",
                        lines: [
                            { position: "ÂàùÁàª", text: "ÂàùÁàªËæ≠", meaning: "‰∫ãÊÉÖÁöÑÈñãÂßãÈöéÊÆµÔºåÈúÄË¶ÅË¨πÊÖéÂ∞çÂæÖ„ÄÇ" },
                            { position: "‰∫åÁàª", text: "‰∫åÁàªËæ≠", meaning: "‰∫ãÊÉÖÈÄ≤ÂÖ•ÁôºÂ±ïÊúüÔºåÊääÊè°ÊôÇÊ©üÂæàÈáçË¶Å„ÄÇ" },
                            { position: "‰∏âÁàª", text: "‰∏âÁàªËæ≠", meaning: "‰∫ãÊÉÖÂà∞ÈÅîËΩâÊäòÈªûÔºåÈúÄË¶ÅÊô∫ÊÖßÂà§Êñ∑„ÄÇ" },
                            { position: "ÂõõÁàª", text: "ÂõõÁàªËæ≠", meaning: "Êé•ËøëÊàêÂäüÔºå‰ΩÜ‰ªçÈúÄÂ∞èÂøÉË¨πÊÖé„ÄÇ" },
                            { position: "‰∫îÁàª", text: "‰∫îÁàªËæ≠", meaning: "ËôïÊñºÊúâÂà©Âú∞‰ΩçÔºåÈÅãÁî®Êô∫ÊÖßÈÅîÊàêÁõÆÊ®ô„ÄÇ" },
                            { position: "‰∏äÁàª", text: "‰∏äÁàªËæ≠", meaning: "‰∫ãÊÉÖÊé•ËøëÂÆåÊàêÔºåÈúÄË¶ÅÂñÑÂßãÂñÑÁµÇ„ÄÇ" }
                        ]
                    };
                }
            }
        }
        
        // Ê†πÊìöÊï∏Â≠óË®àÁÆóÂç¶Ë±° (Ê¢ÖËä±ÊòìÊï∏Ê≥ï)
        function calculateHexagram(numbers) {
            const num1 = numbers[0];
            const num2 = numbers[1];
            const num3 = numbers[2];

            const upperIndex = (num1 + num2) % 8 || 8; // ‰∏äÂç¶ (1-8)
            const lowerIndex = num3 % 8 || 8; // ‰∏ãÂç¶ (1-8)
            const changingLine = (num1 + num2 + num3) % 6 || 6; // ÂãïÁàª (1-6)

            const originalUpperTrigram = trigramMap[upperIndex];
            const originalLowerTrigram = trigramMap[lowerIndex];
            
            const originalYaoCode = originalUpperTrigram.yao + originalLowerTrigram.yao;
            const changingYaoCodeArray = originalYaoCode.split('');
            
            // ÊîπËÆäÂãïÁàªÁöÑÈô∞ÈôΩÂ±¨ÊÄß
            const changingYaoIndex = 6 - changingLine;
            changingYaoCodeArray[changingYaoIndex] = changingYaoCodeArray[changingYaoIndex] === '1' ? '0' : '1';

            const changingLowerYaoCode = changingYaoCodeArray.slice(3, 6).join('');
            const changingUpperYaoCode = changingYaoCodeArray.slice(0, 3).join('');
            
            const changingLowerTrigram = getTrigramByYao(changingLowerYaoCode);
            const changingUpperTrigram = getTrigramByYao(changingUpperYaoCode);

            const originalHexagram = hexagramTable[originalUpperTrigram.symbol + originalLowerTrigram.symbol];
            const changingHexagram = hexagramTable[changingUpperTrigram.symbol + changingLowerTrigram.symbol];

            return {
                numbers: numbers,
                sum: num1 + num2 + num3,
                originalHexagram: originalHexagram,
                changingHexagram: changingHexagram,
                changingLine: changingLine,
                upperTrigram: originalUpperTrigram,
                lowerTrigram: originalLowerTrigram,
                changingUpperTrigram: changingUpperTrigram,
                changingLowerTrigram: changingLowerTrigram
            };
        }
        
        // Ê†πÊìöÁàªÁöÑ‰∫åÈÄ≤Âà∂‰ª£Á¢ºÂèñÂæóÂÖ´Âç¶
        function getTrigramByYao(yaoCode) {
            for (const key in trigramMap) {
                if (trigramMap[key].yao === yaoCode) {
                    return trigramMap[key];
                }
            }
            return null;
        }

        // Èö®Ê©üÁîüÊàêÊï∏Â≠ó
        function generateRandomNumbers() {
            const numbers = [];
            for (let i = 0; i < 3; i++) {
                numbers.push(Math.floor(Math.random() * 100) + 1);
            }
            document.getElementById('divinationNumbers').value = numbers.join(',');
        }

        // Âü∑Ë°åÂçúÂç¶‰∏ªÂáΩÊï∏
        function performDivination() {
            const input = document.getElementById('divinationNumbers').value.trim();
            
            if (!input) {
                alert('Ë´ãËº∏ÂÖ•Êï∏Â≠óÈÄ≤Ë°åÂçúÂç¶„ÄÇ');
                return;
            }
            
            try {
                const numbers = input.split(',').map(num => {
                    const parsed = parseInt(num.trim());
                    if (isNaN(parsed) || parsed < 1 || parsed > 100) {
                        throw new Error(`Êï∏Â≠ó "${num.trim()}" ÁÑ°ÊïàÔºåË´ãËº∏ÂÖ•1-100‰πãÈñìÁöÑÊï¥Êï∏„ÄÇ`);
                    }
                    return parsed;
                });
                
                if (numbers.length !== 3) {
                    alert('Ë´ãËº∏ÂÖ•ÂâõÂ•Ω3ÂÄãÊï∏Â≠ó„ÄÇ');
                    return;
                }
                
                const result = calculateHexagram(numbers);
                displayDivinationResult(result);
                
            } catch (error) {
                alert('Ëº∏ÂÖ•Ê†ºÂºèÈåØË™§Ôºö\n' + error.message);
            }
        }

        // È°ØÁ§∫ÂçúÂç¶ÁµêÊûú
        function displayDivinationResult(result) {
            const originalHex = hexagrams[result.originalHexagram] || { name: 'Êú™Áü•Âç¶', chinese: 'Êú™Áü•Âç¶', symbol: '‚òØ', judgment: 'Ê≠§Âç¶Ë≥áÊñôÂ∫´Êú™Êî∂ÈåÑ„ÄÇ', image: 'Ê≠§Âç¶Ë≥áÊñôÂ∫´Êú™Êî∂ÈåÑ„ÄÇ', lines: [] };
            const changingHex = hexagrams[result.changingHexagram] || { name: 'Êú™Áü•Âç¶', chinese: 'Êú™Áü•Âç¶', symbol: '‚òØ', judgment: 'Ê≠§Âç¶Ë≥áÊñôÂ∫´Êú™Êî∂ÈåÑ„ÄÇ', image: 'Ê≠§Âç¶Ë≥áÊñôÂ∫´Êú™Êî∂ÈåÑ„ÄÇ', lines: [] };

            const resultSection = document.getElementById('resultSection');
            const hexagramDisplay = document.getElementById('hexagramDisplay');

            hexagramDisplay.innerHTML = `
                <div class="divination-info">
                    <div class="divination-process"><strong>ÂçúÂç¶Êï∏Â≠óÔºö</strong>${result.numbers.join(', ')}</div>
                    <div class="divination-process"><strong>‰∏äÂç¶Ôºö</strong>${result.upperTrigram.symbol} ${result.upperTrigram.name}Ôºà${result.upperTrigram.nature}Ôºâ</div>
                    <div class="divination-process"><strong>‰∏ãÂç¶Ôºö</strong>${result.lowerTrigram.symbol} ${result.lowerTrigram.name}Ôºà${result.lowerTrigram.nature}Ôºâ</div>
                    <div class="divination-process"><strong>ÂãïÁàªÔºö</strong>Á¨¨${result.changingLine}Áàª</div>
                </div>
                <div class="hexagram-symbol">${originalHex.symbol}</div>
                <div class="hexagram-name">${originalHex.chinese}</div>
                <div class="hexagram-number">Êú¨Âç¶ÔºöÁ¨¨ ${result.originalHexagram} Âç¶Ôºö${originalHex.name}</div>
            `;
            
            document.getElementById('judgment').innerHTML = `
                <h3>Êú¨Âç¶Âç¶Ëæ≠</h3>
                <p><strong>${originalHex.judgment}</strong></p>
                <p>${originalHex.judgmentMeaning || ''}</p>
            `;
            
            document.getElementById('image').innerHTML = `
                <h3>Êú¨Âç¶Ë±°Ëæ≠</h3>
                <p><strong>${originalHex.image}</strong></p>
                <p>${originalHex.imageMeaning || ''}</p>
            `;
            
            const linesHtml = (originalHex.lines || []).map((line, index) => {
                const isChanging = (index + 1) === result.changingLine;
                return `
                    <div class="line-item ${isChanging ? 'changing-line' : ''}">
                        <div class="line-title">${line.position} ${isChanging ? 'üî•ÔºàÂãïÁàªÔºâ' : ''}</div>
                        <p><strong>${line.text}</strong></p>
                        <p>${line.meaning}${isChanging ? ' ‚≠ê Ê≠§ÁàªÁÇ∫ÂãïÁàªÔºåËÆäÂåñÁöÑÈóúÈçµÊâÄÂú®„ÄÇ' : ''}</p>
                    </div>
                `;
            }).join('');
            
            document.getElementById('lines').innerHTML = `
                <h3>Êú¨Âç¶ÁàªËæ≠</h3>
                <div class="lines-container">${linesHtml || 'ÁÑ°ÁàªËæ≠Ë≥áÊñô'}</div>
            `;
            
            document.getElementById('changing').innerHTML = `
                <h3>ËÆäÂç¶Ôºö${changingHex.chinese}</h3>
                <div style="text-align: center; margin: 20px 0; padding: 20px; background: #f0f8ff; border-radius: 10px;">
                    <div style="font-size: 2.5rem; margin-bottom: 10px;">${changingHex.symbol}</div>
                    <div style="font-size: 1.3rem; color: #2c3e50; margin-bottom: 15px;">Á¨¨ ${result.changingHexagram} Âç¶Ôºö${changingHex.name}</div>
                    <div style="color: #666; font-size: 0.95rem;">
                        ËÆäÂç¶ÁµÑÊàêÔºö${result.changingUpperTrigram.symbol}${result.changingUpperTrigram.name} ‰∏ä ${result.changingLowerTrigram.symbol}${result.changingLowerTrigram.name} ‰∏ã
                    </div>
                </div>
                <div style="margin-bottom: 15px;">
                    <strong>ËÆäÂç¶Âç¶Ëæ≠Ôºö</strong>${changingHex.judgment}
                </div>
                <div style="margin-bottom: 15px;">
                    <strong>ËÆäÂç¶ÊÑèÁæ©Ôºö</strong>${changingHex.judgmentMeaning || ''}
                </div>
                <div style="margin-bottom: 15px;">
                    <strong>ËÆäÂç¶Ë±°Ëæ≠Ôºö</strong>${changingHex.image}
                </div>
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 15px;">
                    <strong>üí° ÂçúÂç¶ÊåáÂºïÔºö</strong><br>
                    Êú¨Âç¶È°ØÁ§∫Áï∂ÂâçÁãÄÊ≥ÅÔºåÂãïÁàªÊåáÂá∫ËÆäÂåñÈóúÈçµÔºåËÆäÂç¶È†êÁ§∫ÁôºÂ±ïË∂®Âã¢„ÄÇÈáçÈªûÈóúÊ≥®ÂãïÁàªÁöÑÊåáÂ∞éÊÑèÁæ©„ÄÇ
                </div>
            `;
            
            document.getElementById('changingTab').style.display = 'block';
            showTab('judgment');
            
            resultSection.style.display = 'block';
            resultSection.scrollIntoView({ behavior: 'smooth' });
        }

        // ÂàáÊèõÂàÜÈ†Å
        function showTab(tabName) {
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            const buttons = document.querySelectorAll('.tab-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            const targetButton = document.querySelector(`.tab-btn[onclick="showTab('${tabName}')"]`);
            if(targetButton) {
                targetButton.classList.add('active');
            }
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            loadHexagrams();
        });
    </script>
</body>
</html>